<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>üåà Color Knowledge Quiz - Hand Gesture Game</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Audio Elements -->
    <audio id="backgroundMusic" loop preload="auto">
        <!-- Free Creative Commons music - replace with your own files -->
        <source src="https://archive.org/download/DST-DarknessToLight/DST-DarknessToLight.mp3" type="audio/mpeg">
        <!-- Fallback: You can replace with your own music files -->
    </audio>
    
    <audio id="correctSound" preload="auto">
        <!-- Simple correct sound - will use Web Audio API fallback -->
    </audio>
    
    <audio id="wrongSound" preload="auto">
        <!-- Simple wrong sound - will use Web Audio API fallback -->
    </audio>

    <div class="game-container">
        <!-- Game Header -->
        <header class="game-header">
            <div class="logo">
                <img src="ust_logo.jpg" alt="UST Logo" class="ust-logo">
                <h1>UST COLOUR QUIZ GAME</h1>
            </div>
            <div class="stats">
                <div class="stat-item">
                    <span class="stat-label">ustar Points</span>
                    <span class="stat-value" id="score">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Lives</span>
                    <span class="stat-value" id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Level</span>
                    <span class="stat-value" id="level">1</span>
                </div>
                <div class="stat-item">
                    <button id="audioToggle" class="audio-toggle" title="Toggle Background Music">
                        üîä
                    </button>
                </div>
            </div>
        </header>

        <!-- Game Main Area -->
        <main class="game-main">
            <!-- Color Categories Sidebar -->
            <aside class="color-categories-sidebar">
                <h3>UST Color Categories</h3>
                <div class="color-categories-list" id="colorCategoriesList">
                    <div class="color-category" data-color="Purple">
                        <div class="color-box" style="background-color: #7B2CBF;"></div>
                        <div class="color-info">
                            <span class="color-name">Purple</span>
                            
                        </div>
                    </div>
                    <div class="color-category" data-color="Indigo">
                        <div class="color-box" style="background-color: #3F37C9;"></div>
                        <div class="color-info">
                            <span class="color-name">Indigo</span>
                        </div>
                    </div>
                    <div class="color-category" data-color="Quartz">
                        <div class="color-box" style="background-color: #51484F;"></div>
                        <div class="color-info">
                            <span class="color-name">Quartz</span>
                        </div>
                    </div>
                    <div class="color-category" data-color="Green">
                        <div class="color-box" style="background-color: #01B27C;"></div>
                        <div class="color-info">
                            <span class="color-name">Green</span>
                        </div>
                    </div>
                    <div class="color-category" data-color="Gold">
                        <div class="color-box" style="background-color: #FFD700;"></div>
                        <div class="color-info">
                            <span class="color-name">Gold</span>
                        </div>
                    </div>
                    <div class="color-category" data-color="Orange">
                        <div class="color-box" style="background-color: #FF8500;"></div>
                        <div class="color-info">
                            <span class="color-name">Orange</span>
                            
                        </div>
                    </div>
                    <div class="color-category" data-color="Rose">
                        <div class="color-box" style="background-color: #FF69B4;"></div>
                        <div class="color-info">
                            <span class="color-name">Rose</span>
                            
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Game Content Area -->
            <div class="game-content">
                <!-- Current Question Display -->
                <div class="question-display" id="questionDisplay">
                    <h2 class="current-question" id="currentQuestion">Get ready to start the quiz!</h2>
                </div>
                
                <!-- Game Canvas -->
                <div class="game-area">
                    <canvas id="gameCanvas"></canvas>
                
                <!-- Game Overlays -->
                <!-- Player Registration Screen -->
                <div class="game-overlay" id="playerRegistrationScreen">
                    <div class="overlay-content registration-content">
                        <h2>üéÆ Welcome to UST Color Quiz! üåà</h2>
                        <div class="registration-form">
                            <div class="form-group">
                                <label for="playerName">üë§ Player Name:</label>
                                <input type="text" id="playerName" placeholder="Enter your name" maxlength="20">
                            </div>
                            <div class="form-group">
                                <label for="playerAccount">üè¢ UST Account (Optional):</label>
                                <input type="text" id="playerAccount" placeholder="Enter your UST ID" maxlength="50">
                            </div>
                        </div>
                        <div class="welcome-info">
                            <h3>üéØ Game Overview</h3>
                            <p>Test your knowledge of UST's 7 color categories while controlling your aircraft with hand gestures!</p>
                            <ul>
                                <li>üü£ Purple - People</li>
                                <li>üîµ Indigo - Integral Processes</li>
                                <li>‚ö´ Quartz - Quality</li>
                                <li>üü¢ Green - Growth</li>
                                <li>üü° Gold - Global Branding</li>
                                <li>üü† Orange - Organizational Efficiency</li>
                                <li>üå∏ Rose - Relation</li>
                            </ul>
                        </div>
                        <button class="start-btn" onclick="showGestureDemo()">NEXT: LEARN CONTROLS ‚û°Ô∏è</button>
                    </div>
                </div>

                <!-- Gesture Demo Screen -->
                <div class="game-overlay hidden" id="gestureDemoScreen">
                    <div class="overlay-content demo-content">
                        <h2>‚úã Hand Gesture Tutorial</h2>
                        <div class="demo-area">
                            <div class="demo-video-container">
                                <video id="demoVideoElement" class="demo-video" autoplay muted playsinline></video>
                                <canvas id="demoHandCanvas" class="demo-hand-overlay"></canvas>
                                <div class="demo-status">
                                    <div class="demo-camera-status" id="demoCameraStatus">
                                        <span class="status-light"></span>
                                        <span>Camera: Connecting...</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="demo-instructions">
                                <h3>üéØ Practice These Gestures:</h3>
                                <div class="demo-gesture-list">
                                    <div class="demo-gesture-item" id="demoGestureUp">
                                        <div class="gesture-visual">‚úã</div>
                                        <div class="gesture-details">
                                            <h4>Open Hand</h4>
                                            <p>Fly Up ‚¨ÜÔ∏è</p>
                                            <div class="practice-status">Try it now!</div>
                                        </div>
                                    </div>
                                    
                                    <div class="demo-gesture-item" id="demoGestureDown">
                                        <div class="gesture-visual">‚úä</div>
                                        <div class="gesture-details">
                                            <h4>Closed Fist</h4>
                                            <p>Fly Down ‚¨áÔ∏è</p>
                                            <div class="practice-status">Try it now!</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="demo-progress">
                                    <h4>üèÜ Practice Progress:</h4>
                                    <div class="progress-items">
                                        <div class="progress-item" id="progressUp">
                                            <span>Open Hand:</span>
                                            <span class="progress-status">‚ùå Not Practiced</span>
                                        </div>
                                        <div class="progress-item" id="progressDown">
                                            <span>Closed Fist:</span>
                                            <span class="progress-status">‚ùå Not Practiced</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="demo-controls">
                            <button class="back-btn" onclick="showPlayerRegistration()">‚¨ÖÔ∏è BACK</button>
                            <button class="start-btn" id="startGameBtn" onclick="startGameFromDemo()" disabled>START GAME üöÄ</button>
                        </div>
                        
                        <div class="demo-tips">
                            <h4>üí° Tips for Better Recognition:</h4>
                            <ul>
                                <li>‚Ä¢ Keep your hand clearly visible in the camera</li>
                                <li>‚Ä¢ Make distinct gestures (fully open or fully closed)</li>
                                <li>‚Ä¢ Hold gestures for 1-2 seconds</li>
                                <li>‚Ä¢ Ensure good lighting for better detection</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="game-overlay hidden" id="startScreen">
                    <div class="overlay-content">
                        <h2>üåà Find UST Colours! ‚úàÔ∏è</h2>
                        <p>Pilot your aircraft to collect the correct colors:</p>
                        <div class="gesture-instructions">
                            <div class="gesture-item">
                                <span class="gesture-icon">‚úã</span>
                                <span>Open Hand = Fly Up</span>
                            </div>
                            <div class="gesture-item">
                                <span class="gesture-icon">‚úä</span>
                                <span>Closed Fist = Fly Down</span>
                            </div>
                        </div>
                        <div class="color-info">
                            <p><strong>How to Play:</strong></p>
                            <p>‚Ä¢ Read the question at the top of the screen</p>
                            <p>‚Ä¢ Flying color blocks will appear from the right</p>
                            <p>‚Ä¢ Use gestures to fly and collect the CORRECT color</p>
                            <p>‚Ä¢ Earn 100 ustar points for each correct collection</p>
                            <p>‚Ä¢ You have 4 lives - avoid wrong colors!</p>
                        </div>
                        <button class="start-btn" onclick="startGame()">START QUIZ</button>
                        </div>
                </div>

                <div class="game-overlay hidden" id="pauseScreen">
                    <div class="overlay-content">
                        <h2>‚è∏Ô∏è Quiz Paused</h2>
                        <button class="resume-btn" onclick="resumeGame()">RESUME QUIZ</button>
                        <button class="restart-btn" onclick="restartGame()">RESTART QUIZ</button>
                    </div>
                </div>

                <div class="game-overlay hidden" id="gameOverScreen">
                    <div class="overlay-content">
                        <h2>üéØ Quiz Complete!</h2>
                        <p class="final-score">Final Score: <span id="finalScore">0</span></p>
                        <div class="achievements" id="achievements"></div>
                        <button class="restart-btn" onclick="restartGame()">TRY AGAIN</button>
                    </div>
                </div>

                <div class="game-overlay hidden" id="winnerScreen">
                    <div class="overlay-content winner-content">
                        <h2>üèÜ CONGRATULATIONS! üåà</h2>
                        <h3>üéâ Perfect Color Master! üéâ</h3>
                        <p class="winner-message">You answered all 7 color categories correctly!</p>
                        <div class="winner-stats">
                            <div class="winner-stat">
                                <span class="stat-icon">üåü</span>
                                <span class="stat-text">Perfect Score: <span id="winnerScore">0</span></span>
                            </div>
                            <div class="winner-stat">
                                <span class="stat-icon">üéØ</span>
                                <span class="stat-text">Questions Mastered: 7/7</span>
                            </div>
                            <div class="winner-stat">
                                <span class="stat-icon">‚úàÔ∏è</span>
                                <span class="stat-text">Flight Mission Complete!</span>
                            </div>
                        </div>
                        <button class="restart-btn winner-btn" onclick="restartGame()">üöÄ NEW MISSION</button>
                    </div>
                </div>

                <!-- Hand Tracking Video -->
                <video id="videoElement" class="hand-tracking-video" autoplay muted playsinline></video>
                <canvas id="handCanvas" class="hand-tracking-overlay"></canvas>
            </div>
            </div>

            <!-- Control Panel -->
            <div class="control-panel">
                <div class="gesture-status">
                    <h3>ü§ñ Gesture Recognition</h3>
                    <div class="status-indicator" id="cameraStatus">
                        <span class="status-light"></span>
                        <span>Camera: Connecting...</span>
                    </div>
                    <div class="current-gesture">
                        <span class="gesture-display" id="currentGesture">ü§∑‚Äç‚ôÇÔ∏è No Gesture</span>
                    </div>
                    <div class="gesture-confidence">
                        <label>Confidence:</label>
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="confidenceBar"></div>
                        </div>
                        <span id="confidenceText">0%</span>
                    </div>
                </div>

                <div class="game-controls">
                    <h3>üéÆ Game Controls</h3>
                    <div class="control-buttons">
                        <button class="control-btn" onclick="togglePause()" id="pauseBtn">‚è∏Ô∏è PAUSE</button>
                        <button class="control-btn" onclick="toggleSound()" id="soundBtn">üîä SOUND ON</button>
                        <button class="control-btn" onclick="showInstructions()" id="helpBtn">‚ùì HELP</button>
                    </div>
                    <div class="difficulty-selector">
                        <label>Difficulty:</label>
                        <select id="difficulty" onchange="changeDifficulty()">
                            <option value="easy">üü¢ Easy</option>
                            <option value="normal" selected>üü° Normal</option>
                            <option value="hard">üî¥ Hard</option>
                            <option value="nightmare">üíÄ Nightmare</option>
                        </select>
                    </div>
                </div>

                <div class="performance-stats">
                    <h3>üìä Quiz Statistics</h3>
                    <div class="stat-row">
                        <span>Accuracy:</span>
                        <span id="accuracy">0%</span>
                    </div>
                    <div class="stat-row">
                        <span>Correct Answers:</span>
                        <span id="enemiesHit">0</span>
                    </div>
                    <div class="stat-row">
                        <span>Questions Answered:</span>
                        <span id="timePlayed">0 Questions</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- MediaPipe Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>
    
    <!-- Game Scripts -->
    <script src="audioManager.js"></script>
    <script src="playerRegistration.js"></script>
    <script src="touchControls.js"></script>
    <script src="game.js"></script>
    <script src="handTracking.js"></script>
    <script src="app.js"></script>
</body>
</html>
